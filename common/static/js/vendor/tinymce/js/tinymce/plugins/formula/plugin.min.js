!function(t){function n(e,t){e.windowManager.open({title:"Formula",width:900,height:610,html:a(e,t),buttons:[{text:"Cancel",onclick:function(){this.parent().parent().close()}},{text:"Insert Formula",subtype:"primary",onclick:function(t){var n=this;window.frames.tinymceFormula&&window.frames.tinymceFormula.getData?window.frames.tinymceFormula.getData(function(t,a,o){t&&e.insertContent('<img class="fm-editor-equation" src="'+t+'" data-mlang="'+a+'" data-equation="'+encodeURIComponent(o)+'"/>'),n.parent().parent().close()}):n.parent().parent().close()}}]})}function a(t,n){var a=t.selection.getNode(),o=t.getParam("language")||"en",i="",r="";"img"==a.nodeName.toLowerCase()&&a.className.indexOf("fm-editor-equation")>-1&&(a.getAttribute("data-mlang")&&(i="&mlang="+a.getAttribute("data-mlang")),a.getAttribute("data-equation")&&(r="&equation="+a.getAttribute("data-equation")));var m=new URL(n);return m.hostname=e.documentBaseURI.host,'<iframe name="tinymceFormula" id="tinymceFormula" src="'+m.href+"/index.html?lang="+o+i+r+'" scrolling="no" frameborder="0"></iframe>'}t.create("tinymce.plugins.Formula",{init:function(e,t){var a=(e.getParam("formula")||{}).path||t;e.addButton("formula",{image:a+"/img/formula.png",tooltip:"Insert Formula",onclick:n.bind(this,e,a),onPostRender:function(){var t=this;e.on("NodeChange",function(e){t.active(e.element.className.indexOf("fm-editor-equation")>-1&&"img"==e.element.nodeName.toLowerCase())})}})}}),t.PluginManager.requireLangPack("formula","en-us,pl,es,fr_FR"),t.PluginManager.add("formula",t.plugins.Formula)}(window.tinymce);
